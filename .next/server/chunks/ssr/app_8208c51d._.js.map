{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/meteor/Desktop/AleGo/ale-project/app/components/shop/Filters.tsx"],"sourcesContent":["// components/shop/Filters.tsx (client)\n'use client';\nimport React, { useState } from 'react';\nimport { Select, Button, InputNumber } from 'antd';\n\ntype Props = {\n  level: string;\n  status: string;\n  setLevel: (v: string) => void;\n  setStatus: (v: string) => void;\n  minPrice: number;\n  maxPrice: number;\n  setMinPrice: (n: number) => void;\n  setMaxPrice: (n: number) => void;\n  sort: string;\n  setSort: (s: string) => void;\n  apply: () => void;\n};\n\nexport default function Filters({\n  level, status, setLevel, setStatus,\n  minPrice, maxPrice, setMinPrice, setMaxPrice,\n  sort, setSort, apply\n}: Props) {\n  const levelOptions = ['All', 'Collector', 'Premium', 'Cute'];\n  const statusOptions = ['All', 'In Stock', 'Pre-orde', 'Cute'];\n  const [left,setLeft] = useState(0)\n  const [right,setRight] = useState(0)\n     // price inputs\n \n  const globalMinPrice = 0 \n \n  const globalMaxPrice = 2000\n  return (\n    <div>\n      <h4>Filters</h4>\n\n      <div style={{ marginTop: 8 }}>\n        <h4>Product Level</h4>\n        <div className='option-list' id=\"levelOptions\">\n          {levelOptions.map(option => (\n            <Button\n              key={option}\n              className={`chip ${level === option ? 'active' : ''}`}\n              onClick={() => setLevel(option)}\n            >\n              {option}\n            </Button>\n          ))}\n        </div>\n\n      </div>\n\n      <div style={{ marginTop: 12 }}>\n        <h4>Product Status</h4>\n        <div className='option-list' id=\"statusOptions\">\n          {statusOptions.map(option => (\n            <Button\n              key={option}\n              className={`chip ${status === option ? 'active' : ''}`}\n              onClick={() => setStatus(option)}\n            >\n              {option}\n            </Button>\n          ))}\n        </div>\n      </div>\n\n      <div style={{ marginTop: 12 }}>\n        <h4>Price (USD)</h4>\n        <div className=\"range-controls\" style={{marginTop:8}}>\n            <input className='priceInput' min={0} value={minPrice} onChange={(v = 0) => {\n              setMinPrice(Number(v || 0))\n              const left = v/globalMaxPrice *100\n              console.log(222,left)\n              setLeft(left)\n              }}  id=\"priceMin\" aria-label=\"Minimum price\" />\n            <div style={{color:'var(--muted)'}}>—</div>\n            <input className='priceInput'  min={0} value={maxPrice} onChange={(v= 0) => {\n              setMaxPrice(Number(v || 0)) \n              const right = (globalMaxPrice-v)/globalMaxPrice *100\n              console.log(right)\n              setRight(right)\n              \n              }} id=\"priceMax\"  aria-label=\"Maximum price\" />\n          </div>\n\n          <div className=\"double-range\" style={{marginTop:10}}>\n            <div className=\"range-track\" aria-hidden=\"true\">\n              <div className=\"fill\" id=\"rangeFill\" style={{left:left+'%',right:right+'%',width:`${100-left-right}%`}}></div>\n            </div>\n          </div>\n       \n      </div>\n\n      <div style={{ marginTop: 12 }}>\n        <h4>Sort By</h4>\n       \n        <select id=\"sortSelect\" value={sort}  className=\"sort\" onChange={(v) => setSort(v)} aria-label=\"Sort products\">\n            <option value=\"new\">Newest arrivals</option>\n            <option value=\"release_asc\">Release date ↑</option>\n            <option value=\"release_desc\">Release date ↓</option>\n            <option value=\"sales_desc\">Best selling</option>\n            <option value=\"fav_desc\">Most saved</option>\n            <option value=\"price_asc\">Price: low → high</option>\n            <option value=\"price_desc\">Price: high → low</option>\n          </select>\n      </div>\n\n      <div style={{ marginTop: 14 }}>\n        <button  className=\"apply-btn\"  onClick={apply}>Apply filters</button>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 334, "column": 0}, "map": {"version":3,"sources":["file:///Users/meteor/Desktop/AleGo/ale-project/app/types/product.ts"],"sourcesContent":["// types/product.ts\nexport type Product = {\n    product_id: number;\n    category_id:number;\n    status:number;\n    sku: string;\n    name: string;\n    artist: string;\n    price: number;\n    edition: string;\n    availability: string;\n    img: string;\n    fav?: boolean;\n    sales: number;\n    release: number;\n  };\n\n  export const statusList = ['','预售','现货']\n  export const categoryList = ['','Q版','精品','收藏']"],"names":[],"mappings":"AAAA,mBAAmB;;;;;;;AAiBV,MAAM,aAAa;IAAC;IAAG;IAAK;CAAK;AACjC,MAAM,eAAe;IAAC;IAAG;IAAK;IAAK;CAAK","debugId":null}},
    {"offset": {"line": 356, "column": 0}, "map": {"version":3,"sources":["file:///Users/meteor/Desktop/AleGo/ale-project/app/components/shop/ProductCard.tsx"],"sourcesContent":["// components/shop/ProductCard.tsx (client)\n'use client';\nimport React from 'react';\nimport { Product,statusList,categoryList } from '../../types/product';\nimport { Card, Button } from 'antd';\n\ntype Props = {\n  product: Product;\n  isFav: boolean;\n  onToggleFav: () => void;\n  onView: () => void;\n};\n\nexport default function ProductCard({ product, isFav, onToggleFav, onView }: Props) {\n \n   \n  return (\n    <article className=\"card\" role=\"listitem\">\n      <div className=\"media\" aria-hidden=\"false\">\n        <div className=\"badge\">{product.edition}</div>\n        <button className={`fav ${isFav ? 'active' : ''}`} aria-label=\"Save\" onClick={onToggleFav}>\n          <svg width=\"14\" height=\"14\" viewBox=\"0 0 24 24\" fill=\"none\"><path d=\"M20.8 7.6c0 6.2-8.8 12-8.8 12S3.2 13.8 3.2 7.6A4.4 4.4 0 018 3.2c1.8 0 3.4 1.1 4 2.6.6-1.5 2.2-2.6 4-2.6a4.4 4.4 0 014.8 4.4z\" stroke=\"currentColor\" strokeWidth=\"1.2\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/></svg>\n        </button>\n        <img loading=\"lazy\" alt={product.name} src={product.image} onError={(e)=>{ (e.target as HTMLImageElement).src = '/images/fallback.png'; }} />\n      </div>\n\n      <div className=\"card-body\">\n        <div style={{ flex: 1 }}>\n          <div className=\"title\">{product.name}</div>\n          <div className=\"subtitle\">AT-{product.product_id} · {categoryList[product.category_id]} · {statusList[product.status]}</div>\n        </div>\n        <div style={{ textAlign: 'right' }}>\n          <div className=\"price\">${product.price}</div>\n          <div className=\"subtitle muted\" style={{ fontSize: 12 }}>Sold {product.sales || 199} </div>\n        </div>\n      </div>\n\n      <div className=\"card-actions\">\n        <button className=\"btn\" onClick={onView} aria-label=\"View details\">View</button>\n        <button className={`btn`} onClick={onToggleFav}>{isFav ? 'Saved' : 'Save'}</button>\n      </div>\n    </article>\n  );\n}"],"names":[],"mappings":"AAAA,2CAA2C;;;;;;AAG3C;AAFA;;;AAYe,SAAS,YAAY,EAAE,OAAO,EAAE,KAAK,EAAE,WAAW,EAAE,MAAM,EAAS;IAGhF,qBACE,8OAAC;QAAQ,WAAU;QAAO,MAAK;;0BAC7B,8OAAC;gBAAI,WAAU;gBAAQ,eAAY;;kCACjC,8OAAC;wBAAI,WAAU;kCAAS,QAAQ,OAAO;;;;;;kCACvC,8OAAC;wBAAO,WAAW,CAAC,IAAI,EAAE,QAAQ,WAAW,IAAI;wBAAE,cAAW;wBAAO,SAAS;kCAC5E,cAAA,8OAAC;4BAAI,OAAM;4BAAK,QAAO;4BAAK,SAAQ;4BAAY,MAAK;sCAAO,cAAA,8OAAC;gCAAK,GAAE;gCAAgI,QAAO;gCAAe,aAAY;gCAAM,eAAc;gCAAQ,gBAAe;;;;;;;;;;;;;;;;kCAEnR,8OAAC;wBAAI,SAAQ;wBAAO,KAAK,QAAQ,IAAI;wBAAE,KAAK,QAAQ,KAAK;wBAAE,SAAS,CAAC;4BAAO,EAAE,MAAM,CAAsB,GAAG,GAAG;wBAAwB;;;;;;;;;;;;0BAG1I,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAI,OAAO;4BAAE,MAAM;wBAAE;;0CACpB,8OAAC;gCAAI,WAAU;0CAAS,QAAQ,IAAI;;;;;;0CACpC,8OAAC;gCAAI,WAAU;;oCAAW;oCAAI,QAAQ,UAAU;oCAAC;oCAAI,uIAAY,CAAC,QAAQ,WAAW,CAAC;oCAAC;oCAAI,qIAAU,CAAC,QAAQ,MAAM,CAAC;;;;;;;;;;;;;kCAEvH,8OAAC;wBAAI,OAAO;4BAAE,WAAW;wBAAQ;;0CAC/B,8OAAC;gCAAI,WAAU;;oCAAQ;oCAAE,QAAQ,KAAK;;;;;;;0CACtC,8OAAC;gCAAI,WAAU;gCAAiB,OAAO;oCAAE,UAAU;gCAAG;;oCAAG;oCAAM,QAAQ,KAAK,IAAI;oCAAI;;;;;;;;;;;;;;;;;;;0BAIxF,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBAAO,WAAU;wBAAM,SAAS;wBAAQ,cAAW;kCAAe;;;;;;kCACnE,8OAAC;wBAAO,WAAW,CAAC,GAAG,CAAC;wBAAE,SAAS;kCAAc,QAAQ,UAAU;;;;;;;;;;;;;;;;;;AAI3E","debugId":null}},
    {"offset": {"line": 550, "column": 0}, "map": {"version":3,"sources":["file:///Users/meteor/Desktop/AleGo/ale-project/app/components/shop/ProductGrid.tsx"],"sourcesContent":["// components/shop/ProductGrid.tsx (client)\n'use client';\nimport React from 'react';\nimport { Product } from '../../types/product';\nimport ProductCard from './ProductCard';\n\ntype Props = {\n  items: Product[];\n  favorites: Record<number, number>;\n  onToggleFav: (id: number) => void;\n  onView: (p: Product) => void;\n};\n\nexport default function ProductGrid({ items, favorites, onToggleFav, onView }: Props) {\n  if (items.length === 0) return <div className=\"muted\">No results. Try adjusting filters or search.</div>;\n\n  return (\n    <div className=\"grid\" role=\"list\">\n      {items.map(p => (\n        <ProductCard key={p.product_id} product={p} isFav={!!favorites[p.product_id]} onToggleFav={() => onToggleFav(p.product_id)} onView={() => onView(p)} />\n      ))}\n    </div>\n  );\n}"],"names":[],"mappings":"AAAA,2CAA2C;;;;;;AAI3C;AAHA;;;AAYe,SAAS,YAAY,EAAE,KAAK,EAAE,SAAS,EAAE,WAAW,EAAE,MAAM,EAAS;IAClF,IAAI,MAAM,MAAM,KAAK,GAAG,qBAAO,8OAAC;QAAI,WAAU;kBAAQ;;;;;;IAEtD,qBACE,8OAAC;QAAI,WAAU;QAAO,MAAK;kBACxB,MAAM,GAAG,CAAC,CAAA,kBACT,8OAAC,oJAAW;gBAAoB,SAAS;gBAAG,OAAO,CAAC,CAAC,SAAS,CAAC,EAAE,UAAU,CAAC;gBAAE,aAAa,IAAM,YAAY,EAAE,UAAU;gBAAG,QAAQ,IAAM,OAAO;eAA/H,EAAE,UAAU;;;;;;;;;;AAItC","debugId":null}},
    {"offset": {"line": 592, "column": 0}, "map": {"version":3,"sources":["file:///Users/meteor/Desktop/AleGo/ale-project/app/components/shop/ProductModal.tsx"],"sourcesContent":["// components/shop/ProductModal.tsx (client)\n'use client';\nimport React from 'react';\nimport { Product,statusList,categoryList } from '../../types/product';\nimport { Modal, Button } from 'antd';\n\ntype Props = {\n  visible: boolean;\n  product: Product | null;\n  onClose: () => void;\n  onToggleFav: (id: number) => void;\n  isFav: (id: number) => boolean;\n};\n\nexport default function ProductModal({ visible, product, onClose, onToggleFav, isFav }: Props) {\n  if (!product) {\n    return <Modal open={visible} onCancel={onClose} footer={null} />;\n  }\n\n  return (\n    <Modal\n      open={visible}\n      onCancel={onClose}\n      footer={null}\n      width={920}\n      className=\"custom-modal\"\n      bodyStyle={{ padding: 18 }}\n    >\n      <div style={{ display: 'grid', gridTemplateColumns: '1fr 1fr', gap: 16, maxHeight: '80vh', overflow: 'auto' }}>\n        <div style={{ position: 'relative' }}>\n          <div className=\"media\" style={{ height: 420 }}>\n            <img src={product.image} alt={product.name} style={{ width: '100%', height: '100%', objectFit: 'cover' }} />\n          </div>\n        </div>\n\n        <div className=\"meta\">\n          <h2 id=\"modalTitle\" style={{ margin: 0, marginBottom: 8 }}>{product.name}</h2>\n          <div className=\"muted\" style={{ marginBottom: 12 }}>AT-{product.product_id} · {categoryList[product.category_id]} · {statusList[product.status]}</div>\n\n          <div style={{ display: 'flex', gap: 12, alignItems: 'center', marginBottom: 12 }}>\n            <div style={{ fontSize: 20, fontWeight: 800, color: 'var(--accent1)' }}>${product.price}</div>\n            <div className=\"badge\" style={{ position: 'static', background: 'transparent', color: 'var(--muted)', padding: '6px 8px', borderRadius: 8, border: '1px solid rgba(255,255,255,0.03)' }}>{product.edition}</div>\n          </div>\n\n          <p className=\"muted\" style={{ marginTop: 8 }}>\n            Limited/resin statue. Hand-painted finish. Edition: {product.edition}. Release date: {new Date(product.release).toLocaleDateString()}. This product has sold {product.sales} units.\n          </p>\n\n          <div style={{ display: 'flex', gap: 10, marginTop: 18 }}>\n            <Button type={isFav(product.product_id) ? 'primary' : 'default'} onClick={() => onToggleFav(product.product_id)}>{isFav(product.product_id) ? 'Saved' : 'Save'}</Button>\n            <Button onClick={() => { /* navigate to product page in real app */ }}>Open product page</Button>\n          </div>\n        </div>\n      </div>\n    </Modal>\n  );\n}"],"names":[],"mappings":"AAAA,4CAA4C;;;;;;AAG5C;AACA;AAAA;AAHA;;;;AAae,SAAS,aAAa,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,WAAW,EAAE,KAAK,EAAS;IAC3F,IAAI,CAAC,SAAS;QACZ,qBAAO,8OAAC,yLAAK;YAAC,MAAM;YAAS,UAAU;YAAS,QAAQ;;;;;;IAC1D;IAEA,qBACE,8OAAC,yLAAK;QACJ,MAAM;QACN,UAAU;QACV,QAAQ;QACR,OAAO;QACP,WAAU;QACV,WAAW;YAAE,SAAS;QAAG;kBAEzB,cAAA,8OAAC;YAAI,OAAO;gBAAE,SAAS;gBAAQ,qBAAqB;gBAAW,KAAK;gBAAI,WAAW;gBAAQ,UAAU;YAAO;;8BAC1G,8OAAC;oBAAI,OAAO;wBAAE,UAAU;oBAAW;8BACjC,cAAA,8OAAC;wBAAI,WAAU;wBAAQ,OAAO;4BAAE,QAAQ;wBAAI;kCAC1C,cAAA,8OAAC;4BAAI,KAAK,QAAQ,KAAK;4BAAE,KAAK,QAAQ,IAAI;4BAAE,OAAO;gCAAE,OAAO;gCAAQ,QAAQ;gCAAQ,WAAW;4BAAQ;;;;;;;;;;;;;;;;8BAI3G,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,IAAG;4BAAa,OAAO;gCAAE,QAAQ;gCAAG,cAAc;4BAAE;sCAAI,QAAQ,IAAI;;;;;;sCACxE,8OAAC;4BAAI,WAAU;4BAAQ,OAAO;gCAAE,cAAc;4BAAG;;gCAAG;gCAAI,QAAQ,UAAU;gCAAC;gCAAI,uIAAY,CAAC,QAAQ,WAAW,CAAC;gCAAC;gCAAI,qIAAU,CAAC,QAAQ,MAAM,CAAC;;;;;;;sCAE/I,8OAAC;4BAAI,OAAO;gCAAE,SAAS;gCAAQ,KAAK;gCAAI,YAAY;gCAAU,cAAc;4BAAG;;8CAC7E,8OAAC;oCAAI,OAAO;wCAAE,UAAU;wCAAI,YAAY;wCAAK,OAAO;oCAAiB;;wCAAG;wCAAE,QAAQ,KAAK;;;;;;;8CACvF,8OAAC;oCAAI,WAAU;oCAAQ,OAAO;wCAAE,UAAU;wCAAU,YAAY;wCAAe,OAAO;wCAAgB,SAAS;wCAAW,cAAc;wCAAG,QAAQ;oCAAmC;8CAAI,QAAQ,OAAO;;;;;;;;;;;;sCAG3M,8OAAC;4BAAE,WAAU;4BAAQ,OAAO;gCAAE,WAAW;4BAAE;;gCAAG;gCACS,QAAQ,OAAO;gCAAC;gCAAiB,IAAI,KAAK,QAAQ,OAAO,EAAE,kBAAkB;gCAAG;gCAAyB,QAAQ,KAAK;gCAAC;;;;;;;sCAG9K,8OAAC;4BAAI,OAAO;gCAAE,SAAS;gCAAQ,KAAK;gCAAI,WAAW;4BAAG;;8CACpD,8OAAC,4MAAM;oCAAC,MAAM,MAAM,QAAQ,UAAU,IAAI,YAAY;oCAAW,SAAS,IAAM,YAAY,QAAQ,UAAU;8CAAI,MAAM,QAAQ,UAAU,IAAI,UAAU;;;;;;8CACxJ,8OAAC,4MAAM;oCAAC,SAAS,KAAmD;8CAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAMnF","debugId":null}},
    {"offset": {"line": 816, "column": 0}, "map": {"version":3,"sources":["file:///Users/meteor/Desktop/AleGo/ale-project/app/components/shop/ShopClient.tsx"],"sourcesContent":["// components/shop/ShopClient.tsx (client component)\n// 所有交互逻辑（useState/useEffect）\n'use client';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { Product } from '../../types/product';\nimport Filters from './Filters';\nimport ProductGrid from './ProductGrid';\nimport ProductModal from './ProductModal';\nimport { Input, Select, Pagination, Row, Col, Badge } from 'antd';\nimport { SearchOutlined } from '@ant-design/icons';\nconst statusOptions = ['All', 'In Stock', 'Pre-orde', 'Cute'];\n\nconst { Option } = Select;\n\ntype Props = { initialProducts: Product[] };\n\nexport default function ShopClient({ initialProducts }: Props) {\n  // data\n  const [products, setProducts] = useState<Product[]>([]);\n\n  // ui state\n  const [query, setQuery] = useState<string>('');\n  const [level, setLevel] = useState<string>('All');\n  const [status, setStatus] = useState<string>('All');\n  const [minPrice, setMinPrice] = useState<number>(0);\n  const [maxPrice, setMaxPrice] = useState<number>(2000);\n  const [sort, setSort] = useState<string>('new');\n  const [page, setPage] = useState<number>(1);\n  const [perPage, setPerPage] = useState<number>(12);\n\n  const [favorites, setFavorites] = useState<Record<number, number>>({});\n  const [selected, setSelected] = useState<Product | null>(null);\n\n  async function loadProducts() {\n    try {\n      const res = await fetch('/api/getProducts');\n      if (!res.ok) throw new Error('获取商品数据失败');\n      const data: any[] = await res.json();\n      const array = data.concat(data).concat(data).concat(data)\n      setProducts(array || []);\n    } catch (err) {\n      console.error(err);\n    }\n  }\n\n\n\n  // load favorites from localStorage\n  useEffect(() => {\n    if (typeof window === 'undefined') return;\n    try {\n      const raw = localStorage.getItem('aletoys_favs');\n      console.log(2222,raw)\n      if (raw) setFavorites(JSON.parse(raw));\n    } catch { }\n  }, []);\n\n  useEffect(() => {\n    loadProducts()\n  }, []);\n\n\n  // persist favorites\n  useEffect(() => {\n    try {\n      localStorage.setItem('aletoys_favs', JSON.stringify(favorites));\n    } catch { }\n  }, [favorites]);\n\n  // filtered & sorted\n  const filtered = useMemo(() => {\n    let out = products.filter(p => {\n      if (level !== 'All' && p.edition !== level) return false;\n      if (status !== 'All' && p.availability !== status) return false;\n      if (p.price < minPrice || p.price > maxPrice) return false;\n      if (query) {\n        const hay = (p.name + ' ' + statusOptions[p.status]).toLowerCase();\n\n        if (!hay.includes(query.toLowerCase())) return false;\n      }\n      return true;\n    });\n\n    switch (sort) {\n      case 'release_asc': out.sort((a, b) => a.release - b.release); break;\n      case 'release_desc': out.sort((a, b) => b.release - a.release); break;\n      case 'sales_desc': out.sort((a, b) => b.sales - a.sales); break;\n      case 'fav_desc': out.sort((a, b) => (Number(Boolean(favorites[b.id])) - Number(Boolean(favorites[a.id])))); break;\n      case 'price_asc': out.sort((a, b) => a.price - b.price); break;\n      case 'price_desc': out.sort((a, b) => b.price - a.price); break;\n      case 'new':\n      default: out.sort((a, b) => b.release - a.release); break;\n    }\n    return out;\n  }, [products, level, status, minPrice, maxPrice, query, sort, favorites]);\n\n  // pagination\n  const total = filtered.length;\n  const totalPages = Math.max(1, Math.ceil(total / perPage));\n  useEffect(() => { if (page > totalPages) setPage(totalPages); }, [totalPages, page]);\n\n  const pageItems = useMemo(() => {\n    const start = (page - 1) * perPage;\n    console.log(3333,start)\n    return filtered.slice(start, start + perPage);\n  }, [filtered, page, perPage]);\n\n  function toggleFav(id: number) {\n    setFavorites(prev => {\n      const next = { ...prev };\n      console.log(66666)\n      if (next[id]) delete next[id];\n      else next[id] = Date.now();\n      return next;\n    });\n  }\n\n  function openModal(p: Product) { setSelected(p); document.body.style.overflow = 'hidden'; }\n  function closeModal() { setSelected(null); document.body.style.overflow = ''; }\n\n  return (\n    <div className=\"layout\">\n      <aside className=\"panel\" aria-label=\"Filters\">\n        <Filters\n          level={level}\n          status={status}\n          setLevel={(v) => { setLevel(v); setPage(1); }}\n          setStatus={(v) => { setStatus(v); setPage(1); }}\n          minPrice={minPrice}\n          maxPrice={maxPrice}\n          setMinPrice={setMinPrice}\n          setMaxPrice={setMaxPrice}\n          sort={sort}\n          setSort={(v) => { setSort(v); setPage(1); }}\n          apply={() => setPage(1)}\n        />\n      </aside>\n\n      <section>\n        <div className=\"top-controls\">\n          <div>\n            <div className=\"page-title\">Shop All</div>\n            <div className=\"meta-small muted\">Curated limited editions & contemporary collectibles</div>\n          </div>\n\n          <div className=\"controls-row\">\n            <div className=\"meta-small muted\">Showing <strong>{total}</strong></div>\n\n\n            <div className=\"search\" role=\"search\" aria-label=\"Site search\">\n              <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\"><path d=\"M21 21l-4.35-4.35\" stroke=\"currentColor\" stroke-width=\"1.6\" stroke-linecap=\"round\" stroke-linejoin=\"round\" /><circle cx=\"11\" cy=\"11\" r=\"6\" stroke=\"currentColor\" stroke-width=\"1.6\" /></svg>\n              <input id=\"search\" placeholder=\"Search collectibles, artist, SKU...\" aria-label=\"Search products\" value={query}\n                onChange={e => { setQuery(e.target.value); setPage(1); }} />\n            </div>\n\n\n              <select id=\"perPage\" className=\"sort\" title=\"Items per page\" aria-label=\"Items per page\"  value={String(perPage)} onChange={(v) => { \n                setPerPage(Number(v.target.value)); setPage(1); }}>\n                <option value=\"12\">12 / page</option>\n                <option value=\"15\">15 / page</option>\n                <option value=\"10\">10 / page</option>\n              </select>\n          </div>\n        </div>\n\n        <ProductGrid\n          items={pageItems}\n          favorites={favorites}\n          onToggleFav={toggleFav}\n          onView={openModal}\n        />\n\n        <div style={{ marginTop: 18, display: 'flex', justifyContent: 'center' }}>\n          <Pagination\n            className='paginationStyle'\n            current={page}\n            pageSize={perPage}\n            total={total}\n            onChange={(p, ps) => { setPage(p); setPerPage(ps || perPage); window.scrollTo({ top: 240, behavior: 'smooth' }); }}\n            showSizeChanger={false}\n            simple={false}\n          />\n        </div>\n\n        <ProductModal visible={!!selected} product={selected} onClose={closeModal} onToggleFav={toggleFav} isFav={(id) => !!favorites[id]} />\n      </section>\n    </div>\n  );\n}"],"names":[],"mappings":"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","debugId":null}}]
}